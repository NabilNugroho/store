<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact - JusDream</title>
    <!-- Tambahkan tautan CSS Tailwind CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      /* Gaya tautan navbar */
      nav ul li a {
        color: #fff;
        text-decoration: none;
        padding: 0.5rem 0.25rem;
      }

      /* Gaya tautan navbar saat dihover */
      nav ul li a:hover {
        background-color: #34d399;
        transition: background-color 0.3s;
      }

      /* Gaya tautan navbar untuk halaman aktif */
      nav ul li.active a {
        background-color: #059669;
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <!-- Navbar -->
    <nav class="bg-green-500 p-4">
      <div class="container mx-auto flex justify-between items-center">
        <h1 class="text-2xl text-white font-semibold">JusDream</h1>
        <ul class="flex space-x-4">
          <li><a href="index.html">Home</a></li>
          <li><a href="menu.html">Menu</a></li>
          <li class="active"><a href="contact.html">Contact</a></li>
        </ul>
      </div>
    </nav>

    <!-- Konten Utama -->
    <main class="container mx-auto my-8">
      <!-- Isi konten halaman Contact -->
      <h2 class="text-3xl text-center font-semibold mb-4">Contact Us</h2>
      <!-- Contact Form -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <form action="#" method="post" id="contactForm">
          <div class="mb-4">
            <label for="name" class="block text-sm font-medium text-gray-700"
              >Name</label
            >
            <input
              type="text"
              id="name"
              name="name"
              class="mt-1 p-2 w-full border rounded-md"
            />
          </div>
          <div class="mb-4">
            <label for="email" class="block text-sm font-medium text-gray-700"
              >Email</label
            >
            <input
              type="email"
              id="email"
              name="email"
              class="mt-1 p-2 w-full border rounded-md"
            />
          </div>
          <div class="mb-4">
            <label for="address" class="block text-sm font-medium text-gray-700"
              >Address</label
            >
            <input
              type="text"
              id="address"
              name="address"
              class="mt-1 p-2 w-full border rounded-md"
            />
          </div>
          <div class="mb-4">
            <label for="message" class="block text-sm font-medium text-gray-700"
              >Message</label
            >
            <textarea
              id="message"
              name="message"
              class="mt-1 p-2 w-full border rounded-md"
              rows="4"
            ></textarea>
          </div>
          <div class="mb-4">
            <label for="product" class="block text-sm font-medium text-gray-700"
              >Product</label
            >
            <select
              id="product"
              name="product"
              class="mt-1 p-2 w-full border rounded-md"
            >
              <option value="Jus Alpukat">Jus Alpukat</option>
              <option value="Jus Anggur">Jus Anggur</option>
              <option value="Jus Delima">Jus Delima</option>
              <option value="Jus Jambu">Jus Jambu</option>
              <option value="Jus Jeruk">Jus Jeruk</option>
              <option value="Jus Mangga">Jus Mangga</option>
              <option value="Jus Nanas">Jus Nanas</option>
              <option value="Jus Strawberry">Jus Strawberry</option>
              <option value="Jus Tomat">Jus Tomat</option>
            </select>
          </div>
          <div class="mb-4">
            <label
              for="quantity"
              class="block text-sm font-medium text-gray-700"
              >Quantity</label
            >
            <input
              type="number"
              id="quantity"
              name="quantity"
              class="mt-1 p-2 w-full border rounded-md"
            />
          </div>
          <button
            type="button"
            class="bg-green-500 text-white py-2 px-4 rounded-full block text-center hover:bg-green-600 transition duration-300"
            id="sendMessage"
          >
            Send Message
          </button>
        </form>

        <!-- Konfirmasi Pengiriman Pesan -->
        <div
          id="confirmation"
          class="mt-4 text-green-500 font-semibold"
          style="display: none"
        >
          Terima Kasih telah memesan :)
        </div>
      </div>

      <!-- Peta dan Lokasi -->
      <div class="bg-white rounded-lg shadow-md p-4 mt-4">
        <h3 class="text-xl font-semibold mb-4">Lokasi</h3>
        <p>Lokasi Kami:</p>
        <!-- Teks Lokasi di atas Peta -->
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3960.395774635839!2d110.42480737379151!3d-6.962551868167766!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e70f35862640ee3%3A0x21bf4147714806ee!2sGg.%20Mangga%2C%20Tj.%20Mas%2C%20Kec.%20Semarang%20Utara%2C%20Kota%20Semarang%2C%20Jawa%20Tengah%2050174!5e0!3m2!1sid!2sid!4v1699322463974!5m2!1sid!2sid"
          width="100%"
          height="300"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-300 py-4">
      <div class="container mx-auto text-center">
        <p class="text-gray-600">&copy; 2023 JusDream. All rights reserved.</p>
      </div>
    </footer>

    <!-- Script JavaScript untuk mengirim pesan dan mengambil parameter produk -->
    <script>
      // Fungsi untuk mengirim pesan
      function sendMessage() {
        const contactForm = document.getElementById("contactForm");
        const confirmation = document.getElementById("confirmation");

        // Dapatkan data dari formulir
        const name = contactForm.elements.name.value;
        const email = contactForm.elements.email.value;
        const address = contactForm.elements.address.value;
        const message = contactForm.elements.message.value;
        const product = contactForm.elements.product.value;
        const quantity = contactForm.elements.quantity.value;

        if (!name || !email || !address || !message || !product || !quantity) {
          // Tambahkan validasi
          alert("Tolong lengkapi formnya terlebih dahulu.");
        } else {
          // Kirim data ke server backend
          fetch(
            "https://script.google.com/macros/s/AKfycbwLl4tWqXZ3sTEKSb7CNgk-aljtk3ec9fCtx6Nlr5qwJf6_Jy14JnRr4tIrty5fjIsW1Q/exec",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: new URLSearchParams({
                name,
                email,
                address,
                message,
                product,
                quantity,
              }),
            }
          )
            .then((response) => response.text())
            .then((data) => {
              // Tampilkan konfirmasi dari respons server
              if (data.includes("Data telah disimpan.")) {
                confirmation.style.display = "block";
                // Kosongkan formulir setelah pengiriman
                contactForm.reset();

                // Hilangkan pesan konfirmasi setelah beberapa detik (misalnya, 5 detik)
                setTimeout(() => {
                  confirmation.style.display = "none";
                }, 5000);
              } else {
                alert("Terjadi kesalahan saat mengirim pesan.");
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              alert("Terjadi kesalahan saat mengirim pesan.");
            });
        }
      }

      // Tambahkan event listener ke tombol Send Message
      const sendMessageButton = document.getElementById("sendMessage");
      sendMessageButton.addEventListener("click", sendMessage);

      // Ambil parameter produk dari URL
      const urlParams = new URLSearchParams(window.location.search);
      const product = urlParams.get("product");

      // Isi nilai produk ke dalam elemen select
      const productSelect = document.getElementById("product");
      if (productSelect) {
        productSelect.value = product;
      }
    </script>
  </body>
</html>
